## [MySQL(RPG).](https://joytas.net/programming/mysql/mysql_rpg)
#### 準備
1. 以下のようにデータベースを作成する。
	~~~mysql
	create database rpg_app
	default character set utf8;
	~~~
1. 以下のようにパーティーテーブルを作成し、データを挿入する。
	~~~mysql
	create table パーティー(
	id char(3),
	名称 varchar(20),
	職業コード char(2),
	hp int,
	mp int,
	状態コード char(2)
	);

	insert into パーティー values
	('C01','ミナト','01',89,35,'00'),
	('C02','アサカ','11',74,66,'00');
	~~~
1. 以下のようにイベントテーブルを作成し、データを挿入する。
1. 以下のように経験イベントテーブルを作成し、データを挿入する。
1. 以下のようにコードテーブルを作成し、データを挿入する。
1. 上記４つのテーブルを使って以下の問に答えよ。
## LEVLE1
1. 主人公のパーティにいるキャラクターの全データをパーティーテーブルから抽出せよ。
	~~~mysql
	select * from パーティー
	~~~
	~~~mysql
	id	名称	職業コード	hp	mp	状態コード	
	C01	ミナト	01		89	35	00	
	C02	アサカ	11		74	66	00	
	~~~
1. パーティーテーブルから、名称、HP､MPの一覧を取得する。各見出しは次のように表示すること。  
	・なまえ　・現在のHP　・現在のMP
	~~~mysql
	select 名称 as 名前,hp as 現在のHP,mp as 現在のMP from パーティー
	~~~
	~~~mysql
	名前	現在のHP	現在のMP
	ミナト	89		35
	アサカ	74		66
	~~~
1. 現在設定されているイベントの全データをイベントテーブルから抽出する。ただし「*｣を用いること
	~~~mysql
	select * from イベント
	~~~
1. イベントテーブルから、イベント番号とイベント名称の一覧を取得する。各見出しは次のように表示すること  
	・番号　・場面
	~~~mysql
	select イベント番号 as 番号, イベント名称 as 場面 from イベント
	~~~
1. パーティーテーブルに、次の３つのデータを追加する。  
	ID：A01、A02、A03  
	名称：スガワラ､オーエ,イズミ  
	職業コード：21、10､20  
	HP:131、156、84  
	MP:232、84、190
	~~~mysql
	insert into パーティー(id,名称,職業コード,hp,mp)values
	('A01','スガワラ',21,131,232),
	('A02','オーエ',10,156,84),
	('A03','イズミ',20,84,190);
	~~~
	## LEVLE2
1. パーティーテーブルから、IDが「C01」のデータを抽出する。
	~~~mysql
	select * from パーティー where id='C01'
	~~~
	~~~mysql
	id	名称	職業コード	hp	mp	状態コード
	C01	ミナト	01		89	35	00	
	~~~
1. パーティーテーブルのID「A01｣のデータについて、HPを120に更新する。
	~~~mysql
	select * from パーティー where id='A01'
	id	名称		職業コード	hp	mp	状態コード
	A01	スガワラ	21		131	20	
	~~~
	~~~mysql
	update パーティー set hp=120 where id='A01'
	~~~
	~~~mysql
	select * from パーティー where id='A01'
	id	名称		職業コード	hp	mp	状態コード
	A01	スガワラ	21		120	20	
	~~~
1. ﾊﾟｰﾃｨｰテーブルから、HPが100未満のデータについて、ID,名称、HPの一覧を抽出する。
	~~~mysql
	select id,名称,hp from パーティー where hp<100
	~~~
	~~~mysql
	id	名称	hp	
	C01	ミナト	89	
	C02	アサカ	74	
	A03	イズミ	84	
	~~~
1. パーティーテーブルから、MPが100以上のデータについてID、名称、MPの一覧を抽出する。
	~~~mysql
	select id,名称,mp from パーティー where mp>=100
	~~~
	~~~mysql
	id	名称	mp	
	A03	イズミ	190	
	~~~
1. イベントテーブルから、タイプが「特殊」でないデータについて、イベント番号、イベント名称、タイプの一覧を抽出する。
	~~~mysql
	select イベント番号,イベント名称,タイプ from イベント where タイプ<>3
	~~~
	~~~mysql
	イベント番号	イベント名称		タイプ	
	1		オープニング		1	
	3		勇者の旅立ち		1	
	4		初めての仲間		1	
	5		盗賊ダンシーを追え！	1	
	6		宝石の洞窟		2	
	7		イガヤの町の秘密		1	
	8		妖精の森の下で		2	
	9		潜入！バクロック城	1	
	10		師との出会い		1	
	11		隠れ里ボウジーン		2	
	12		ドウンブリッジの戦い	1	
	13		名誉を賭して		2	
	14		ナボーリ火山と三つの島	2	
	15		水の洞窟に潜むもの	1	
	16		盗賊ダンシーの依頼	2	
	17		封印の町ノザ		1	
	18		聖騎士の涙		2	
	19		賢者の婚姻		2	
	20		王位継承者の帰郷		2	
	21		新大陸の魔女		2	
	22		それぞれの願いのために	1	
	23		最終決戦		1	
	24		そして世界のはじまりに	1	
	25		エンディング		1	
	~~~
1. イベントテーブルから、イベント番号が5以下のデータについて、イベント番号とイベント名称を抽出する。
	~~~mysql
	select イベント番号,イベント名称 from イベント where イベント番号<=5
	~~~
	~~~mysql
	イベント番号	イベント名称	
	1		オープニング	
	2		オープニング（2週目以降）	
	3		勇者の旅立ち	
	4		初めての仲間	
	5		盗賊ダンシーを追え！	
	~~~
1. イベントテーブルから、イベント番号が20を超過しているデータについて、イベント番号とイベント名称を抽出する。
	~~~mysql
	select イベント番号,イベント名称 from イベント where イベント番号>20
	~~~
	~~~mysql
	イベント番号	イベント名称	
	21		新大陸の魔女	
	22		それぞれの願いのために	
	23		最終決戦	
	24		そして世界のはじまりに	
	25		エンディング	
	26		エンディング(2週目以降)	
	~~~
1. イベントテーブルから、別のイベントのクリアを前提としないイベントについて、イベント番号とイベント名称を抽出する。
	~~~mysql
	select イベント番号,イベント名称 from イベント where 前提イベント番号 is not null
	~~~
	~~~mysql
	イベント番号	イベント名称	
	4		初めての仲間	
	5		盗賊ダンシーを追え！	
	7		イガヤの町の秘密	
	9		潜入！バクロック城	
	10		師との出会い	
	12		ドウンブリッジの戦い	
	15		水の洞窟に潜むもの	
	16		盗賊ダンシーの依頼	
	17		封印の町ノザ	
	18		聖騎士の涙	
	19		賢者の婚姻	
	20		王位継承者の帰郷	
	21		新大陸の魔女	
	22		それぞれの願いのために	
	23		最終決戦	
	24		そして世界のはじまりに	
	25		エンディング	
	26		エンディング(2週目以降)	
	~~~
1. イベントテーブルから、次に発生するイベントが決められているイベントについて、イベント番号、イベント名称、後続イベント番号を抽出する。
	~~~mysql
	select イベント番号,イベント名称,後続イベント番号 from イベント where 後続イベント番号 is not null
	~~~
	~~~mysql
	イベント番号	イベント名称		後続イベント番号	
	1		オープニング		3	
	2		オープニング（2週目以降）	3	
	3		勇者の旅立ち		4	
	4		初めての仲間		5	
	5		盗賊ダンシーを追え！	7	
	7		イガヤの町の秘密		9	
	9		潜入！バクロック城	10	
	10		師との出会い		12	
	12		ドウンブリッジの戦い	15	
	13		名誉を賭して		18	
	15		水の洞窟に潜むもの	17	
	17		封印の町ノザ		22	
	22		それぞれの願いのために	23	
	23		最終決戦		24	
	~~~
1. 名称に「ミ」が含まれるパーティーグループのデータについて、状態コードを「眠り」に更新する。
	~~~mysql
	select * from パーティー where 名称 like '%ミ%'
	id	名称	職業コード	hp	mp	状態コード	
	C01	ミナト	01		89	35	00	
	A03	イズミ	20		84	190	NULL
	~~~
	~~~mysql
	update パーティー set 状態コード='01' where 名称 like '%ミ%'
	~~~
	~~~mysql
	select * from パーティー where 名称 like '%ミ%'
	id	名称	職業コード	hp	mp	状態コード	
	C01	ミナト	01		89	35	01	
	A03	イズミ	20		84	190	01	
	~~~
1. HPが120~160の範囲にあるパーティーテーブルのデータについて、ID,名称、HPの一覧を抽出する。ただし、記述条件は１つであること。
	~~~mysql
	select id,名称,hp from パーティー where hp between 120 and 160
	~~~
	~~~mysql
	id	名称		hp	
	A01	スガワラ	120	
	A02	オーエ		156	
	~~~
1. 職業が「勇者」、「戦士」、「武道家」のいずれかであるパーティーテーブルのデータについて、名称と職業コードを抽出する。ただし、記述する条件式は１つであること
	~~~mysql
	select 名称,職業コード from パーティー
	where 職業コード = '01' or 職業コード ='10' or 職業コード = '11'
	~~~
	~~~mysql
	名称	職業コード	
	ミナト	01	
	アサカ	11	
	オーエ	10	
	~~~
1. 状態コードが「異常なし」と「気絶」のどちらでもないパーティーグループのデータについて名称と状態コードを抽出する。ただし、記述する条件式は１つであること。
	~~~mysql
	select 名称,状態コード from パーティー where 状態コード <> '00' and 状態コード <> '09'
	~~~
	~~~mysql
	名称	状態コード	
	ミナト	01	
	イズミ	01	
	~~~
1. パーティーテーブルから、HPとMPがともに100を超えているデータを抽出する。
	~~~mysql
	select * from パーティー where hp > 100 and mp > 100
	~~~
	~~~mysql
	id	名称		職業コード	hp	mp	状態コード	
	A01	スガワラ	21		120	232	NULL
	~~~
1. パーティーテーブルから、IDが「A」で始まり、職業コードの１文字目が「２」であるデータを抽出する。
	~~~mysql
	select * from パーティー where id like 'a%' and 職業コード like '2%'
	~~~
	~~~mysql
	id	名称		職業コード	hp	mp	状態コード	
	A01	スガワラ	21		120	232	NULL
	A03	イズミ		20		84	190	01	
	~~~
1. イベントテーブルから、タイプが「強制」で、事前にクリアが必要なイベントで、かつ次に発生するイベントが設定されているデータを抽出する。
	~~~mysql
	select * from イベント
	where タイプ = 1 and 前提イベント番号 is not null and 後続イベント番号 is not null
	~~~
	~~~mysql
	イベント番号	イベント名称	タイプ	前提イベント番号	後続イベント番号	
	4	初めての仲間		1	3	5	
	5	盗賊ダンシーを追え！	1	4	7	
	7	イガヤの町の秘密		1	5	9	
	9	潜入！バクロック城	1	7	10	
	10	師との出会い		1	9	12	
	12	ドウンブリッジの戦い	1	10	15	
	15	水の洞窟に潜むもの	1	12	17	
	17	封印の町ノザ		1	15	22	
	22	それぞれの願いのために	1	17	23	
	23	最終決戦		1	22	24	
	~~~
1. パーティーテーブルとイベントテーブルそれぞれについて、主キーの役割を果たしている列名を日本語で解答する。
	~~~mysql
	select id as 識別子 from パーティー
	~~~
	~~~mysql
	select イベント番号 as 識別子 from イベント
	~~~
	## LEVEL3
1. パーティーテーブルから、パーティーの現在の状態コード一覧を取得する。重複は除外すること。
	~~~mysql
	select distinct 状態コード from パーティー
	~~~
	~~~mysql
	状態コード	
	01	
	00	
	NULL
	~~~
1. パーティーテーブルから、IDと名称をIDの昇順に抽出する。
	~~~mysql
	select id,名称 from パーティー order by id asc
	~~~
	~~~mysql
	id	名称	
	A01	スガワラ	
	A02	オーエ	
	A03	イズミ	
	C01	ミナト	
	C02	アサカ	
	~~~
1. パーティーテーブルから、名称と職業コードを名称の逆順に抽出する。
	~~~mysql
	select 名称,職業コード from パーティー order by 名称 desc
	~~~
	~~~mysql
	名称		職業コード	
	ミナト		01	
	スガワラ	21	
	オーエ		10	
	イズミ		20	
	アサカ		11	
	~~~
1. パーティーテーブルから、名称,HP,状態コードを、状態コードの昇順かつHPの高い順に抽出する。
	~~~mysql
	select 名称,hp,状態コード from パーティー order by 状態コード asc,hp desc
	~~~
	~~~mysql
	名称	hp	状態コード   	
	オーエ		156	NULL
	スガワラ	120	NULL
	アサカ		74	00	
	ミナト		89	01	
	イズミ		84	01	
	~~~
1. イベントテーブルから、タイプ、イベント番号、イベント名称、前提イベント番号、後続イベント番号をタイプの昇順かつイベント番号の昇順に抽出する。並び替えには列番号を用いること。  
[Tips]
ORDER BYの列指定には列番号を用いることができる。
列番号とは選択列リストにおける列の番号のことで、SELECT命令に記述した順に1から数える。
	~~~mysql
	select タイプ,イベント番号,イベント名称,前提イベント番号,後続イベント番号
	from イベント order by 1 asc,2 asc
	~~~
1. パーティーテーブルから、HPの高い順に3件抽出する。
	~~~mysql
	select * from パーティー order by hp desc limit 3
	~~~
	~~~mysql
	id	名称	職業コード	hp	mp	状態コード	
	A02	オーエ	10	156	84	NULL	
	A01	スガワラ	21	120	232	NULL	
	C01	ミナト	01	89	35	01	
	~~~
29. パーティーテーブルから、MPが3番目に高いデータを抽出する。
	~~~mysql
	~~~
	~~~mysql
	~~~
30. パーティーテーブルから、次の形式の一覧を取得する。
	~~~mysql
	~~~
	~~~mysql
	~~~
・職業区分 ・職業コード　・ID　・名称
職業区分は、物理攻撃の得意なもの(職業コードが1から始まる)を[S],魔法攻撃の得意なもの(職業コードが2から始まる)を[M],それ以外を[A]と表示すること。また一覧は職業コード順とすること。

31. イベントテーブルと経験イベントテーブルから、まだ参加していないイベント番号を抽出する。イベント番号順に表示すること。
	~~~mysql
	~~~
	~~~mysql
	~~~
[tips]
まだ参加していない->経験イベントテーブルあるデータを除外
副問い合わせを用いWHERE句を以下のように記述するとよい

1
WHERE イベント番号 NOT IN(SELECT イベント番号 FROM 経験イベント　WHERE )
32. イベントテーブルと経験イベントテーブルから、すでにクリアされたイベントのうちタイプがフリーのイベント番号を抽出する。
	~~~mysql
	~~~
	~~~mysql
	~~~
[tips]
すでにクリアされた->経験イベントテーブルある
副問い合わせを用いWHERE句を以下のように記述するとよい


1. cw
	~~~mysql
	~~~
	~~~mysql
	~~~
